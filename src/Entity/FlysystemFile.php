<?php

declare(strict_types=1);

namespace App\Entity;

use Doctrine\DBAL\Types\Types;
use Doctrine\ORM\Mapping as ORM;

/**
 * This class represents a Flysystem file and is used for Doctrine to generate the table schema.
 */
#[ORM\Entity]
#[ORM\Table(name: 'flysystem_files')]
#[ORM\UniqueConstraint(name: 'path_unique', columns: ['path'])]
class FlysystemFile
{
    #[ORM\Id]
    #[ORM\Column(type: Types::BIGINT, columnDefinition: 'BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL')]
    private int $id; // @phpstan-ignore property.unused

    #[ORM\Column()]
    private string $path; // @phpstan-ignore property.unused

    #[ORM\Column(length: 4, options: [
        'check' => '(type = "dir" OR type = "file")'
    ])]
    private string $type; // @phpstan-ignore property.unused

    #[ORM\Column(type: Types::BLOB, nullable: true)]
    private string $contents; // @phpstan-ignore property.unused

    #[ORM\Column(options: ['default' => 0])]
    private int $size = 0; // @phpstan-ignore property.onlyWritten

    #[ORM\Column()]
    private int $level; // @phpstan-ignore property.unused

    #[ORM\Column(name: 'mimetype', length: 127, nullable: true)]
    private string $mimeType; // @phpstan-ignore property.unused

    #[ORM\Column(length: 7, options: ['default' => 'public', 'check' => '(visibility = "public" OR visibility = "private")'])]
    private string $visibility; // @phpstan-ignore property.unused

    #[ORM\Column(options: ['default' => 0])]
    private int $timestamp; // @phpstan-ignore property.unused
}
